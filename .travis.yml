language: python
python:
- '3.8'
services:
- postgresql
addons:
  postgresql: '9.6'
install:
- pip install -r requirements.txt
before_script:
- psql --version
- psql -c 'create database roadtrip_test;' -U postgres
- python manage.py db upgrade
script:
- pytest
deploy:
  provider: heroku
  api_key:
    secure: OyGa2q47nI3G0rDDuoSShQjgVc+8h9bg2K5NJytHdEve/ePzh4X33L066Va6PyAmIfLnuc5Y6F0C1VuAGn43addS1RZr07TPKwt1zDmXt6neZgWDsTP5gZkMEWekczKyi6msY+85I9hghjQo40BTf2g5Qg4/8b2aDs39mk/m5JxiNpIuYfYt6kofgDwdo/1WWFxYSxGvGq6NjQzmOi7SMxMaGUfkqEJ2ajm8znQeEUf4g4+yOCVL39DsnA8lTVE/TVJ89LoQC8TcLJtjNONsBs8ofRaQolKdkUWNwaDMuL9M8vJmjR3tLUjmXHfI6OIpRSMg9Z8x5auADp+f2I9MLCOzcLtFXijhpJrlDXgSXGgl9fUf/ly/syD/dJmIiF1vlz811uG2OyzpHQXC73MQxsjv7giWZ+HReFlny6FXSKY0FnimH43MkJtcbtrtaDjLlCd24vrK9xFwj1kJs6RqOSJZvdz5kR8gD0mVtYPr27PG8gtmkL7WXgFOXsV/ZsoPfjnBvXNU4jYo67diYRxV/VTPOVobhaykmO2kdnT4IOMyepEbiH3XV3V0RQKmRwQ74/0xlyLl4Xc4NWf7CZaC5CTFCJ1h7G5homCjQPKftccQZ9HFP0nhI2J5st0UAlaBFCSH3GzmADUh+JBPHkfHvHNxwRaSnDrbIJdyAPmBEh4=
  app: iandouglas-ufsnd-capstone
  on:
    repo: iandouglas/udacity-fsnd-capstone
    branch: main
  skip_cleanup: 'true'
